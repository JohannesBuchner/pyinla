
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Covid in NJ &#8212; PyINLA</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">PyINLA</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Examples and Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="hospital.html">
   Hospitals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="drivers.html">
   Drivers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gp.html">
   Gaussian process regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="malaria.html">
   Malaria
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/al-jshen/pyinla"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/examples/jersey_covid.ipynb.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Covid in NJ</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="covid-in-nj">
<h1>Covid in NJ<a class="headerlink" href="#covid-in-nj" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmocean.cm</span> <span class="k">as</span> <span class="nn">cmo</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Video</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">rgb2hex</span>
<span class="kn">from</span> <span class="nn">pyinla.model</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyinla.raster</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyinla.spde</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyinla.utils</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">tqdm.auto</span> <span class="kn">import</span> <span class="n">tqdm</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/jersey_covid_2021-2022.csv&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;2021&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
<span class="n">population</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/njpop.csv&quot;</span><span class="p">)</span>
<span class="n">income</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/njincome.csv&quot;</span><span class="p">)</span>
<span class="n">pov</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/njpoverty.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geojson</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;./data/nj_county_boundaries.geojson&quot;</span><span class="p">)</span>
<span class="n">geojson</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[[</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span> <span class="s2">&quot;COUNTY&quot;</span><span class="p">,</span> <span class="s2">&quot;FIPSSTCO&quot;</span><span class="p">]]</span>
<span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;fips&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;FIPSSTCO&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">geojson</span> <span class="o">=</span> <span class="n">geojson</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;FIPSSTCO&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">geojson</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">income</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pov</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">,</span> <span class="s2">&quot;fips&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;fips&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;death_frac&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">deaths</span> <span class="o">/</span> <span class="n">gdf</span><span class="o">.</span><span class="n">cases</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="s2">&quot;2021-01-05&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;deaths&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/jersey_covid_5_1.png" src="../_images/jersey_covid_5_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf</span><span class="p">)):</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;cases&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;cases&quot;</span><span class="p">][</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">diff</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;cases&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;cases&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;deaths&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;deaths&quot;</span><span class="p">][</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">diff</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;deaths&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;deaths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">))):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="n">d</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="s2">&quot;death_frac&quot;</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmo</span><span class="o">.</span><span class="n">deep</span><span class="p">,</span>
        <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="mf">0.06</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">0.06</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./out/njdf-{str(i).zfill(3)}.jpg&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "f2593b60997940a0aba72cd64ef4d0e4", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ffmpeg -framerate <span class="m">30</span> -pattern_type glob -i <span class="s1">&#39;*.jpg&#39;</span> -c:v libx264 -pix_fmt yuv420p out.mp4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span><span class="p">(</span><span class="s2">&quot;./out/out.mp4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><video src="./out/out.mp4" controls  width="500"  height="600">
      Your browser does not support the <code>video</code> element.
    </video></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">counties</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span><span class="p">)</span>
<span class="n">adj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">counties</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">counties</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">counties</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">counties</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="n">counties</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">touches</span><span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="n">counties</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">adj</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">adj</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="s2">&quot;MERCER&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
    <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="s2">&quot;MERCER&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cases</span><span class="p">)</span>
    <span class="o">/</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="s2">&quot;MERCER&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop2020</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">()[</span><span class="mi">0</span><span class="p">][::</span><span class="mi">100</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/jersey_covid_12_0.png" src="../_images/jersey_covid_12_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">county_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">ro</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s2">&quot;as.factor&quot;</span><span class="p">)(</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">county_id_2</span> <span class="o">=</span> <span class="n">county_id</span>
<span class="n">time_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">ro</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s2">&quot;as.factor&quot;</span><span class="p">)(</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">rinla</span><span class="o">.</span><span class="n">inla_read_graph</span><span class="p">(</span><span class="n">adj</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">formula</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">cases ~ f(county_id, model=&#39;bym&#39;, graph=g) + </span>
<span class="s2">    f(county_id_2, time_id, model=&#39;iid&#39;) + </span>
<span class="s2">    time_id + </span>
<span class="s2">    poverty + </span>
<span class="s2">    income</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">inla</span><span class="p">(</span>
    <span class="n">formula</span><span class="o">=</span><span class="n">formula</span><span class="p">,</span>
    <span class="n">family</span><span class="o">=</span><span class="s2">&quot;poisson&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">cases</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
            <span class="n">gdf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">cases</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">)</span>
            <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(([</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">)))</span>
            <span class="o">.</span><span class="n">values</span>
        <span class="p">),</span>
        <span class="n">county_id</span><span class="o">=</span><span class="n">county_id</span><span class="p">,</span>
        <span class="n">county_id_2</span><span class="o">=</span><span class="n">county_id_2</span><span class="p">,</span>
        <span class="n">time_id</span><span class="o">=</span><span class="n">time_id</span><span class="p">,</span>
        <span class="n">poverty</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">poverty2021</span> <span class="o">/</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">,</span>
        <span class="n">income</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">income2021</span> <span class="o">/</span> <span class="mi">1_000</span><span class="p">,</span>
        <span class="n">g</span><span class="o">=</span><span class="n">g</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">E</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">,</span>
    <span class="n">control_predictor</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">improve_hyperpar</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Time used:
     = 2.23,  = 0.452,  = 0.0374,  = 2.72 
Fixed effects:
               mean    sd 0.025quant 0.5quant 0.975quant    mode kld
(Intercept) -11.736 1.214    -14.130  -11.739     -9.323 -11.745   0
time_id       0.000 0.001     -0.001    0.000      0.001   0.000   0
poverty      12.655 5.123      2.470   12.671     22.750  12.698   0
income        0.032 0.011      0.011    0.032      0.054   0.032   0

Random effects:
  Name	  Model
    county_id BYM model
   county_id_2 IID model

Model hyperparameters:
                                                 mean       sd 0.025quant
Precision for county_id (iid component)       1856.07  1832.18   1.23e+02
Precision for county_id (spatial component)      1.10     0.35   5.49e-01
Precision for county_id_2                   191778.63 57888.05   9.88e+04
                                            0.5quant 0.975quant     mode
Precision for county_id (iid component)     1.30e+03   6.74e+03 3.37e+02
Precision for county_id (spatial component) 1.06e+00   1.91e+00 9.79e-01
Precision for county_id_2                   1.85e+05   3.25e+05 1.72e+05

Marginal log-Likelihood:  -666496.44 
 is computed 
Posterior summaries for the linear predictor and the fitted values are computed
(Posterior marginals needs also &#39;control.compute=list(return.marginals.predictor=TRUE)&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">get_marginal_type</span><span class="p">(</span><span class="s2">&quot;fixed&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_marginal</span><span class="p">(</span><span class="s2">&quot;poverty&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">spline</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/jersey_covid_18_1.png" src="../_images/jersey_covid_18_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rr_mode</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get_summary</span><span class="p">(</span><span class="s2">&quot;fitted.values&quot;</span><span class="p">)[</span><span class="s2">&quot;mode&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="p">[::</span><span class="mi">365</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">rr_mode</span><span class="p">[::</span><span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[::</span><span class="mi">365</span><span class="p">]),</span>
    <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/jersey_covid_20_1.png" src="../_images/jersey_covid_20_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">rr_mode</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">365</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x44eeae020&gt;]
</pre></div>
</div>
<img alt="../_images/jersey_covid_21_1.png" src="../_images/jersey_covid_21_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">364</span><span class="p">)):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">rr_mode</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]),</span>
        <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">2.6</span><span class="p">),</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmo</span><span class="o">.</span><span class="n">deep</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{np.unique(gdf.date)[i]}&quot;</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./out/inlapred-{str(i).zfill(3)}.jpg&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "a919a7c40adb4a0c9d167911bbab13b0", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ffmpeg -framerate <span class="m">30</span> -pattern_type glob -i <span class="s1">&#39;out/inlapred*.jpg&#39;</span> -c:v libx264 -pix_fmt yuv420p out/inlapred.mp4
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ffmpeg version 5.1.2 Copyright (c) 2000-2022 the FFmpeg developers
  built with Apple clang version 14.0.0 (clang-1400.0.29.202)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/5.1.2_6 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-neon
  libavutil      57. 28.100 / 57. 28.100
  libavcodec     59. 37.100 / 59. 37.100
  libavformat    59. 27.100 / 59. 27.100
  libavdevice    59.  7.100 / 59.  7.100
  libavfilter     8. 44.100 /  8. 44.100
  libswscale      6.  7.100 /  6.  7.100
  libswresample   4.  7.100 /  4.  7.100
  libpostproc    56.  6.100 / 56.  6.100
Input #0, image2, from &#39;out/inlapred*.jpg&#39;:
  Duration: 00:00:12.13, start: 0.000000, bitrate: N/A
  Stream #0:0: Video: mjpeg (Baseline), yuvj420p(pc, bt470bg/unknown/unknown), 1920x1440 [SAR 300:300 DAR 4:3], 30 fps, 30 tbr, 30 tbn
Stream mapping:
  Stream #0:0 -&gt; #0:0 (mjpeg (native) -&gt; h264 (libx264))
Press [q] to stop, [?] for help
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128528000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128538000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128548000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128558000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128568000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128578000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128588000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x128598000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x1285a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x1285b8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128518000] [swscaler @ 0x1285c8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1300a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1300b8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1300c8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1300d8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1300e8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1300f8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x130108000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x130118000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x130128000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x130138000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x130148000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128518000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128528000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128538000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128548000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128558000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128568000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128578000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128588000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x128598000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1285a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130098000] [swscaler @ 0x1285b8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x130098000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x1300a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x1300b8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x1300c8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x1300d8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x1300e8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x1300f8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x130108000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x130118000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x130128000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1285b8000] [swscaler @ 0x130138000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>using SAR=1/1
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>using cpu capabilities: ARMv8 NEON
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>profile High, level 5.0, 4:2:0, 8-bit
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=15 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to &#39;out/inlapred.mp4&#39;:
  Metadata:
    encoder         : Lavf59.27.100
  Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(tv, bt470bg/unknown/unknown, progressive), 1920x1440 [SAR 1:1 DAR 4:3], q=2-31, 30 fps, 15360 tbn
    Metadata:
      encoder         : Lavc59.37.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
frame=  364 fps=191 q=-1.0 Lsize=     265kB time=00:00:12.03 bitrate= 180.5kbits/s speed=6.31x    
video:260kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 1.970051%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>frame I:2     Avg QP:20.50  size: 33379
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>frame P:92    Avg QP:20.48  size:  1079
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>frame B:270   Avg QP:23.99  size:   368
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>consecutive B-frames:  1.1%  0.0%  0.0% 98.9%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>mb I  I16..4: 12.5% 84.1%  3.4%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>mb P  I16..4:  0.2%  0.9%  0.0%  P16..4:  1.0%  0.1%  0.2%  0.0%  0.0%    skip:97.6%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>mb B  I16..4:  0.0%  0.2%  0.0%  B16..8:  1.0%  0.0%  0.0%  direct: 0.2%  skip:98.6%  L0:55.2% L1:44.5% BI: 0.4%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>8x8 transform intra:81.9% inter:73.8%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>coded y,uvDC,uvAC intra: 3.4% 4.7% 2.7% inter: 0.1% 0.3% 0.0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>i16 v,h,dc,p: 78% 15%  7%  0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 26%  7% 66%  0%  0%  0%  0%  0%  0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 42% 21% 17%  5%  2%  3%  3%  5%  2%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>i8c dc,h,v,p: 83%  7%  9%  0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>Weighted P-Frames: Y:0.0% UV:0.0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>ref P L0: 61.6% 30.1%  5.5%  2.8%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>ref B L0: 57.4% 40.7%  1.9%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>ref B L1: 95.2%  4.8%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x149105780] </span>kb/s:175.05
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span><span class="p">(</span><span class="s2">&quot;./out/inlapred.mp4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><video src="./out/inlapred.mp4" controls  width="500"  height="600">
      Your browser does not support the <code>video</code> element.
    </video></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">364</span><span class="p">)):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="p">(</span><span class="n">rr_mode</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span> <span class="o">-</span> <span class="n">gdf</span><span class="o">.</span><span class="n">cases</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">])</span> <span class="o">/</span> <span class="n">gdf</span><span class="o">.</span><span class="n">cases</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">],</span>
        <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
        <span class="n">vmin</span><span class="o">=-</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;{np.unique(gdf.date)[i]}&quot;</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./out/inlares-{str(i).zfill(3)}.jpg&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "936eb05bf3864eb9971d62376d9c5010", "version_major": 2, "version_minor": 0}
</script><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Exception ignored in: &lt;function tqdm.__del__ at 0x284d08940&gt;
Traceback (most recent call last):
  File &quot;/opt/homebrew/Caskroom/miniconda/base/envs/main/lib/python3.10/site-packages/tqdm/std.py&quot;, line 1162, in __del__
    self.close()
  File &quot;/opt/homebrew/Caskroom/miniconda/base/envs/main/lib/python3.10/site-packages/tqdm/notebook.py&quot;, line 291, in close
    self.disp(bar_style=&#39;success&#39;, check_delay=False)
AttributeError: &#39;tqdm&#39; object has no attribute &#39;disp&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ffmpeg -framerate <span class="m">30</span> -pattern_type glob -i <span class="s1">&#39;out/inlares*.jpg&#39;</span> -c:v libx264 -pix_fmt yuv420p out/inlares.mp4
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ffmpeg version 5.1.2 Copyright (c) 2000-2022 the FFmpeg developers
  built with Apple clang version 14.0.0 (clang-1400.0.29.202)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/5.1.2_6 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-neon
  libavutil      57. 28.100 / 57. 28.100
  libavcodec     59. 37.100 / 59. 37.100
  libavformat    59. 27.100 / 59. 27.100
  libavdevice    59.  7.100 / 59.  7.100
  libavfilter     8. 44.100 /  8. 44.100
  libswscale      6.  7.100 /  6.  7.100
  libswresample   4.  7.100 /  4.  7.100
  libpostproc    56.  6.100 / 56.  6.100
Input #0, image2, from &#39;out/inlares*.jpg&#39;:
  Duration: 00:00:12.13, start: 0.000000, bitrate: N/A
  Stream #0:0: Video: mjpeg (Baseline), yuvj420p(pc, bt470bg/unknown/unknown), 1920x1440 [SAR 300:300 DAR 4:3], 30 fps, 30 tbr, 30 tbn
Stream mapping:
  Stream #0:0 -&gt; #0:0 (mjpeg (native) -&gt; h264 (libx264))
Press [q] to stop, [?] for help
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128a48000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x140008000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128a58000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128020000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128a68000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128a78000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128a88000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128a98000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128aa8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128ab8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128a38000] [swscaler @ 0x128ac8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128a38000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128020000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128a48000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128a58000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128a68000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128a78000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128a88000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128a98000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128aa8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128ab8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110050000] [swscaler @ 0x128ac8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x110050000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x110060000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x110070000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x110080000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x110090000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x1100a0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x1100b0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x1100c0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x1100d0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x1100e0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128ac8000] [swscaler @ 0x1100f0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x110100000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x110050000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x110060000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140008000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140018000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140028000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140038000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140048000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140058000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140068000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x1100f0000] [swscaler @ 0x140078000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>using SAR=1/1
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>using cpu capabilities: ARMv8 NEON
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>profile High, level 5.0, 4:2:0, 8-bit
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=15 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to &#39;out/inlares.mp4&#39;:
  Metadata:
    encoder         : Lavf59.27.100
  Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(tv, bt470bg/unknown/unknown, progressive), 1920x1440 [SAR 1:1 DAR 4:3], q=2-31, 30 fps, 15360 tbn
    Metadata:
      encoder         : Lavc59.37.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
frame=  364 fps=189 q=-1.0 Lsize=     426kB time=00:00:12.03 bitrate= 290.2kbits/s speed=6.24x    
video:421kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 1.201028%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>frame I:2     Avg QP:20.65  size: 24328
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>frame P:94    Avg QP:20.20  size:  2310
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>frame B:268   Avg QP:20.83  size:   615
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>consecutive B-frames:  0.8%  0.5%  7.4% 91.2%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>mb I  I16..4: 11.4% 84.8%  3.8%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>mb P  I16..4:  0.2%  4.3%  0.1%  P16..4:  1.1%  0.2%  0.2%  0.0%  0.0%    skip:93.9%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>mb B  I16..4:  0.4%  0.3%  0.0%  B16..8:  1.5%  0.0%  0.0%  direct: 1.0%  skip:96.8%  L0:54.3% L1:44.5% BI: 1.3%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>8x8 transform intra:80.9% inter:75.9%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>coded y,uvDC,uvAC intra: 4.9% 9.3% 2.8% inter: 0.2% 1.0% 0.0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>i16 v,h,dc,p: 75% 17%  6%  1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 43% 10% 43%  1%  1%  0%  1%  0%  0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 41% 20% 17%  5%  3%  3%  4%  5%  2%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>i8c dc,h,v,p: 79%  9% 11%  1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>Weighted P-Frames: Y:0.0% UV:0.0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>ref P L0: 65.7% 21.1%  9.2%  4.0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>ref B L0: 62.6% 35.7%  1.7%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>ref B L1: 96.1%  3.9%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x137606b70] </span>kb/s:283.92
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span><span class="p">(</span><span class="s2">&quot;./out/inlares.mp4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><video src="./out/inlares.mp4" controls  width="500"  height="600">
      Your browser does not support the <code>video</code> element.
    </video></div></div>
</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Jeff Shen<br/>
  
      &copy; Copyright 2022, Jeff Shen.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>